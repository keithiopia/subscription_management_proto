!function(e){"use strict";window.GOVUK=window.GOVUK||{};var t=function(e,t){return"<a "+(t=t?'class="'+t+'"':"")+' href="{{surveyUrl}}" id="take-survey" target="_blank" rel="noopener noreferrer">'+e+"</a>"},r=function(e){return'<section id="user-satisfaction-survey" class="visible" aria-hidden="false">  <div class="survey-wrapper">    <a class="survey-close-button" href="#user-survey-cancel" aria-labelledby="survey-title user-survey-cancel" id="user-survey-cancel" role="button">Close</a>    <h2 class="survey-title" id="survey-title">{{title}}</h2>'+e+"  </div></section>"},n=r("<p>"+t("{{surveyCta}}","survey-primary-link")+' <span class="postscript-cta">{{surveyCtaPostscript}}</span></p>'),i=r('<div id="email-survey-pre">  <a class="survey-primary-link" href="#email-survey-form" id="email-survey-open" rel="noopener noreferrer" role="button" aria-expanded="false">    {{surveyCta}}  </a></div><form id="email-survey-form" action="/contact/govuk/email-survey-signup" method="post" class="js-hidden" aria-hidden="true">  <div class="survey-inner-wrapper">    <div id="survey-form-description" class="survey-form-description">{{surveyFormDescription}}      <br> {{surveyFormCtaPostscript}}    </div>    <label class="survey-form-label" for="survey-email-address">      Email Address    </label>    <input name="email_survey_signup[survey_id]" type="hidden" value="{{surveyId}}">    <input name="email_survey_signup[survey_source]" type="hidden" value="{{surveySource}}">    <input name="email_survey_signup[ga_client_id]" type="hidden" value="{{gaClientId}}">    <input class="survey-form-input" name="email_survey_signup[email_address]" id="survey-email-address" type="text" aria-describedby="survey-form-description">    <button class="survey-form-button" type="submit">{{surveyFormCta}}</button>'+t("{{surveyFormNoEmailInvite}}")+'  </div></form><div id="email-survey-post-success" class="js-hidden" aria-hidden="true" tabindex="-1">  {{surveySuccess}}</div><div id="email-survey-post-failure" class="js-hidden" aria-hidden="true" tabindex="-1">  {{surveyFailure}}</div>'),a=2,s=function(){var e=window.location.pathname;switch(!0){case/^\/working-tax-credit(?:\/|$)/.test(e):return"workingtaxcreditGOV&utm_source=Other&utm_medium=other&t=HMRC&id=12";case/^\/guidance\/money-laundering-regulations-register-with-hmrc(?:\/|$)/.test(e):return"MoneyLaundering RegulationsGOV&utm_source=Other&utm_medium=gov.uk%20survey&t=HMRC&id=45";case/^\/child-tax-credit(?:\/|$)/.test(e):return"ChildTaxCreditGOV&utm_source=Other&utm_medium=gov.uk%20survey&t=HMRC&id=10";case/^\/check-state-pension(?:\/|$)/.test(e):return"checkstatepensionGOV&utm_source=Other&utm_medium=other&t=HMRC&id=46";case/^\/apply-marriage-allowance(?:\/|$)/.test(e):return"marriageallowanceGOV&utm_source=Other&utm_medium=other&t=HMRC&id=47";case/^\/stamp-duty-land-tax(?:\/|$)/.test(e):return"StampDutyLandTaxGOV&utm_source=Other&utm_medium=other&t=HMRC&id=48";case/^\/guidance\/pay-apprenticeship-levy(?:\/|$)/.test(e):return"Apprenticeship Levy&utm_source=Money_and_tax&utm_medium=gov.uk&t=HMRC&id=7";case/^\/update-company-car-details(?:\/|$)/.test(e):return"CompanyCarGOV&utm_source=Other&utm_medium=other&t=HMRC&id=49";case/^\/guidance\/paying-your-employees-expenses-and-benefits-through-your-payroll(?:\/|$)/.test(e):return"PayrollExpensesBenefitsGOV&utm_source=Other&utm_medium=other&t=HMRC&id=50";case/^\/guidance\/pension-schemes-protect-your-lifetime-allowance(?:\/|$)/.test(e):return"PensionSchemeLifetimeAllowanceGOV&utm_source=Other&utm_medium=other&t=HMRC&id=51";case/^\/send-employment-intermediary-report(?:\/|$)/.test(e):return"EmploymentIntermediaryReportGOV&utm_source=Other&utm_medium=other&t=HMRC&id=52";case/^\/guidance\/tell-hmrc-about-your-employment-related-securities(?:\/|$)/.test(e):return"EmploymentRelatedSecuritiesGOV&utm_source=Other&utm_medium=other&t=HMRC&id=53";case/^\/guidance\/pension-administrators-check-a-members-gmp(?:\/|$)/.test(e):return"PensionAdministratorsGMPGOV&utm_source=Other&utm_medium=other&t=HMRC&id=54";default:return""}},u=function(){var e=window.location.pathname;switch(!0){case/^\/(?:eori|starting-to-import|starting-to-export)(?:\/|$)/.test(e):return"https://signup.take-part-in-research.service.gov.uk/?utm_campaign=EORIgov&utm_source=Other&utm_medium=gov.uk%20survey&t=HMRC&id=61";case/^\/(?:duty-deferment-statements|government\/publications\/(?:notice-101-deferring-duty-vat-and-other-charges\/notice-101-deferring-duty-vat-and-other-charges|notice-100-customs-flexible-accounting-system\/notice-100-customs-flexible-accounting-system))(?:\/|$)/.test(e):return"https://signup.take-part-in-research.service.gov.uk/?utm_campaign=DDESgov&utm_source=Other&utm_medium=gov.uk%20survey&t=HMRC&id=60";case/^\/guidance\/(?:vat-what-to-do-if-youre-an-overseas-business-selling-goods-in-the-uk|importing-goods-from-outside-the-eu|vat-imports-acquisitions-and-purchases-from-abroad)(?:\/|$)/.test(e):return"https://signup.take-part-in-research.service.gov.uk/?utm_campaign=importexportadviceGOV&utm_source=Other&utm_medium=gov.uk%20survey&t=HMRC&id=62";default:return""}},o=function(){var e=window.location.pathname;switch(!0){case/^\/government\/collections\/hm-land-registry-forms(?:\/|$)/.test(e):return"https://signup.take-part-in-research.service.gov.uk/?utm_campaign=hm-land-registry-forms&utm_source=&utm_medium=gov.uk&t=LR&id=85";case/^\/government\/collections\/fees-hm-land-registry-guides(?:\/|$)/.test(e):return"https://signup.take-part-in-research.service.gov.uk/?utm_campaign=fees-hm-land-registry-guides&utm_source=&utm_medium=gov.uk&t=LR&id=86";case/^\/government\/collections\/commercial-services(?:\/|$)/.test(e):return"https://signup.take-part-in-research.service.gov.uk/?utm_campaign=commercial-services&utm_source=&utm_medium=gov.uk&t=LR&id=87";case/^\/search-property-information-land-registry(?:\/|$)/.test(e):return"https://signup.take-part-in-research.service.gov.uk/?utm_campaign=/search-property-information-land-registry&utm_source=&utm_medium=gov.uk&t=LR&id=88";case/^\/government\/collections\/how-to-use-the-land-registry-portal(?:\/|$)/.test(e):return"https://signup.take-part-in-research.service.gov.uk/?utm_campaign=/how-to-use-the-land-registry-portal&utm_source=&utm_medium=gov.uk&t=LR&id=89";case/^\/topic\/land-registration\/searches-fees-forms(?:\/|$)/.test(e):return"https://signup.take-part-in-research.service.gov.uk/?utm_campaign=land-registration/searches-fees-forms&utm_source=&utm_medium=gov.uk&t=LR&id=90";case/^\/government\/organisations\/land-registry(?:\/|$)/.test(e):return"https://signup.take-part-in-research.service.gov.uk/?utm_campaign=/organisations/land-registry&utm_source=&utm_medium=gov.uk&t=LR&id=91";case/^\/guidance\/contact-hm-land-registry(?:\/|$)/.test(e):return"https://signup.take-part-in-research.service.gov.uk/?utm_campaign=/guidance/contact-hm-land-registry&utm_source=&utm_medium=gov.uk&t=LR&id=92";case/^\/your-property-boundaries(?:\/|$)/.test(e):return"https://signup.take-part-in-research.service.gov.uk/?utm_campaign=/your-property-boundaries&utm_source=&utm_medium=gov.uk&t=LR&id=94";case/^\/search-house-prices(?:\/|$)/.test(e):return"https://signup.take-part-in-research.service.gov.uk/?utm_campaign=/search-house-prices&utm_source=&utm_medium=gov.uk&t=LR&id=95";default:return""}},c=function(){var e=window.location.pathname;switch(!0){case/^\/guidance\/fulfilment-house-due-diligence-scheme(?:\/|$)/.test(e):return"https://signup.take-part-in-research.service.gov.uk/?utm_campaign=FHDDSgov&utm_source=Other&utm_medium=other&t=HMRC&id=99";case/^\/guidance\/soft-drinks-industry-levy(?:\/|$)/.test(e):return"https://signup.take-part-in-research.service.gov.uk/?utm_campaign=SoftDrinksGOV&utm_source=Other&utm_medium=other&t=HMRC&id=100";case/^\/guidance\/tell-hmrc-if-youve-underpaid-national-minimum-wage-in-the-social-care-sector(?:\/|$)/.test(e):return"https://signup.take-part-in-research.service.gov.uk/?utm_campaign=MinWageSocialCareGOV&utm_source=Other&utm_medium=other&t=HMRC&id=101";default:return""}},m=function(){var e=window.location.pathname;switch(!0){case/^\/tax-on-your-private-pension(?:\/|$)/.test(e):return"https://signup.take-part-in-research.service.gov.uk/?utm_campaign=PrivatePensionContributionsGOV&utm_source=govukother&utm_medium=gov.uk&t=HMRC&id=105";case/^\/update-company-car-details(?:\/|$)/.test(e):return"https://signup.take-part-in-research.service.gov.uk/?utm_campaign=CompanyCarGOV&utm_source=Other&utm_medium=other&t=HMRC&id=49";default:return""}},d=function(){var e=window.location.pathname;switch(!0){case/^\/tax-on-your-private-pension(?:\/|$)/.test(e):return new Date("February 28, 2017");case/^\/update-company-car-details(?:\/|$)/.test(e):return new Date("January 11, 2017");default:return""}},l={defaultSurvey:{url:"https://www.smartsurvey.co.uk/s/gov_uk?c={{currentPath}}",identifier:"user_satisfaction_survey",frequency:6,surveyType:"email"},smallSurveys:[{identifier:"hmrc_jul2017",surveyType:"url",frequency:20,startTime:new Date("July 21, 2017").getTime(),endTime:new Date("November 20, 2017 23:59:50").getTime(),url:"https://signup.take-part-in-research.service.gov.uk/home?utm_campaign="+s(),templateArgs:{title:"Help improve GOV.UK",surveyCta:"Answer some questions about yourself to join the research community.",surveyCtaPostscript:"This link opens in a new tab."},activeWhen:{path:["^/working-tax-credit(?:/|$)","^/guidance/money-laundering-regulations-register-with-hmrc(?:/|$)","^/child-tax-credit(?:/|$)","^/check-state-pension(?:/|$)","^/apply-marriage-allowance(?:/|$)","^/stamp-duty-land-tax(?:/|$)","^/guidance/pay-apprenticeship-levy(?:/|$)","^/update-company-car-details(?:/|$)","^/guidance/paying-your-employees-expenses-and-benefits-through-your-payroll(?:/|$)","^/guidance/pension-schemes-protect-your-lifetime-allowance(?:/|$)","^/send-employment-intermediary-report(?:/|$)","^/guidance/tell-hmrc-about-your-employment-related-securities(?:/|$)","^/guidance/pension-administrators-check-a-members-gmp(?:/|$)"]}},{identifier:"hmrc_child_benefits",surveyType:"url",frequency:6,startTime:new Date("September 13, 2017").getTime(),endTime:new Date("December 14, 2017 23:59:50").getTime(),url:"https://signup.take-part-in-research.service.gov.uk/?utm_campaign=ChildBenefitGOV&utm_source=Other&utm_medium=other&t=HMRC&id=26",templateArgs:{title:"Help us improve our services",surveyCta:"Join our User Research Panel.",surveyCtaPostscript:"This link opens in a new tab."},activeWhen:{path:["^/child-benefit/?$"]}},{identifier:"hmrc_tax_payments",surveyType:"url",frequency:6,startTime:new Date("September 13, 2017").getTime(),endTime:new Date("December 14, 2017 23:59:50").getTime(),url:"https://signup.take-part-in-research.service.gov.uk/?utm_campaign=OverpayUnderpayGOV&utm_source=Other&utm_medium=other&t=HMRC&id=27",templateArgs:{title:"Help us improve our services",surveyCta:"Join our User Research Panel.",surveyCtaPostscript:"This link opens in a new tab."},activeWhen:{path:["^/tax-overpayments-and-underpayments/?$"]}},{identifier:"hmrc_jul2017",surveyType:"url",frequency:20,startTime:new Date("September 21, 2017").getTime(),endTime:new Date("December 21, 2017 23:59:50").getTime(),url:"https://signup.take-part-in-research.service.gov.uk/?utm_campaign=simpleassessmentGOV&utm_source=Other&utm_medium=other&t=HMRC&id=55",templateArgs:{title:"Help improve GOV.UK",surveyCta:"Answer some questions about yourself to join the research community.",surveyCtaPostscript:"This link opens in a new tab."},activeWhen:{path:["^/simple-assessment/?$"]}},{identifier:"hmrc_import",surveyType:"url",frequency:6,startTime:new Date("October 18, 2017").getTime(),endTime:new Date("January 28, 2018 23:59:50").getTime(),url:u(),templateArgs:{title:"Help improve GOV.UK",surveyCta:"Answer some questions about yourself to join the research community.",surveyCtaPostscript:"This link opens in a new tab."},activeWhen:{path:["^/eori(?:/|$)","^/starting-to-import(?:/|$)","^/starting-to-export(?:/|$)","^/duty-deferment-statements(?:/|$)","^/government/publications/notice-101-deferring-duty-vat-and-other-charges/notice-101-deferring-duty-vat-and-other-charges(?:/|$)","^/government/publications/notice-100-customs-flexible-accounting-system/notice-100-customs-flexible-accounting-system(?:/|$)","^/guidance/vat-what-to-do-if-youre-an-overseas-business-selling-goods-in-the-uk(?:/|$)","^/guidance/importing-goods-from-outside-the-eu(?:/|$)","^/guidance/vat-imports-acquisitions-and-purchases-from-abroad(?:/|$)"]}},{identifier:"hmrc_manuals",surveyType:"url",frequency:6,startTime:new Date("October 26, 2017").getTime(),endTime:new Date("January 28, 2018 23:59:50").getTime(),url:"https://www.smartsurvey.co.uk/s/hmrcmanuals/?c={{currentPath}}",templateArgs:{title:"Tell us what you think of GOV.UK",surveyCta:"Answer 5 quick questions to help us make GOV.UK better.",surveyCtaPostscript:"This will open a short survey on another website."},activeWhen:{path:["^/hmrc-internal-manuals(?:/|$)"]}},{identifier:"cttuk_tt",surveyType:"url",frequency:6,startTime:new Date("November 10, 2017").getTime(),endTime:new Date("December 22, 2017 23:59:50").getTime(),url:"https://www.smartsurvey.co.uk/s/CTTUKsurvey/?c={{currentPath}}",templateArgs:{title:"Help improve GOV.UK",surveyCta:"Answer 4 quick questions to help us make GOV.UK better.",surveyCtaPostscript:"This will open a short survey on another website."},activeWhen:{breadcrumb:["Visas and immigration"]}},{identifier:"landregistry",surveyType:"url",frequency:6,startTime:new Date("November 15, 2017").getTime(),endTime:new Date("December 14, 2017 23:59:50").getTime(),url:o(),templateArgs:{title:"Help improve GOV.UK",surveyCta:"Answer some questions about yourself to join the research community.",surveyCtaPostscript:"This link opens in a new tab."},activeWhen:{path:["^/government/collections/hm-land-registry-forms(?:/|$)","^/government/collections/fees-hm-land-registry-guides(?:/|$)","^/government/collections/commercial-services(?:/|$)","^/search-property-information-land-registry(?:/|$)","^/government/collections/how-to-use-the-land-registry-portal(?:/|$)","^/topic/land-registration/searches-fees-forms(?:/|$)","^/government/organisations/land-registry(?:/|$)","^/guidance/contact-hm-land-registry(?:/|$)","^/your-property-boundaries(?:/|$)","^/search-house-prices(?:/|$)"]}},{identifier:"hmrc_money_laundering",surveyType:"url",frequency:1,startTime:new Date("November 15, 2017").getTime(),endTime:new Date("February 16, 2018 23:59:50").getTime(),url:"https://signup.take-part-in-research.service.gov.uk/?utm_campaign=AMLSgov&utm_source=Other&utm_medium=other&t=HMRC&id=84",templateArgs:{title:"Help us improve our services",surveyCta:"Join our User Research Panel.",surveyCtaPostscript:"This link opens in a new tab."},activeWhen:{path:["^/guidance/money-laundering-regulations-supervised-business-register(?:/|$)"]}},{identifier:"hmrc_guidance",surveyType:"url",frequency:1,startTime:new Date("November 15, 2017").getTime(),endTime:new Date("February 16, 2018 23:59:50").getTime(),url:c(),templateArgs:{title:"Help us improve our services",surveyCta:"Join our User Research Panel.",surveyCtaPostscript:"This link opens in a new tab."},activeWhen:{path:["^/guidance/fulfilment-house-due-diligence-scheme(?:/|$)","^/guidance/soft-drinks-industry-levy(?:/|$)","^/guidance/tell-hmrc-if-youve-underpaid-national-minimum-wage-in-the-social-care-sector(?:/|$)"]}},{identifier:"hmrc_november",surveyType:"url",frequency:6,startTime:new Date("November 30, 2017").getTime(),endTime:d(),url:m(),templateArgs:{title:"Help us improve our services, join our User Research Panel",surveyCta:"Join our User Research Panel.",surveyCtaPostscript:"Sign up form will open on another website."},activeWhen:{path:["^/tax-on-your-private-pension(?:/|$)","^/update-company-car-details(?:/|$)"]}}],init:function(){if(l.canShowAnySurvey()){var e=l.getActiveSurvey(l.defaultSurvey,l.smallSurveys);e!==undefined&&l.displaySurvey(e)}},canShowAnySurvey:function(){return!l.pathInBlacklist()&&(!l.otherNotificationVisible()&&(!l.userCompletedTransaction()&&!(e("#user-satisfaction-survey-container").length<=0)))},processTemplate:function(t,r){return e.each(t,function(e,t){r=r.replace(new RegExp("{{"+e+"}}","g"),t)}),r},getUrlSurveyTemplate:function(){return{render:function(t){var r={title:"Tell us what you think of GOV.UK",surveyCta:"Take the 3 minute survey",surveyCtaPostscript:"This will open a short survey on another website",surveyUrl:l.addParamsToURL(t.url)},i=e.extend(r,t.templateArgs);return l.processTemplate(i,n)}}},getEmailSurveyTemplate:function(){return{render:function(t){var r={title:"Tell us what you think of GOV.UK",surveyCta:"Take a short survey to give us your feedback",surveyFormDescription:"We\u2019ll send you a link to a feedback form. It only takes 2 minutes to fill in.",surveyFormCta:"Send me the survey",surveyFormCtaPostscript:"Don\u2019t worry: we won\u2019t send you spam or share your email address with anyone.",surveyFormNoEmailInvite:"Don\u2019t have an email address?",surveySuccess:"Thanks, we\u2019ve sent you an email with a link to the survey.",surveyFailure:"Sorry, we\u2019re unable to send you an email right now. Please try again later.",surveyId:t.identifier,surveySource:l.currentPath(),surveyUrl:l.addParamsToURL(t.url),gaClientId:GOVUK.analytics.gaClientId},n=e.extend(r,t.templateArgs);return l.processTemplate(n,i)}}},getActiveSurveys:function(t){return e.grep(t,function(e){if(l.currentTime()>=e.startTime&&l.currentTime()<=e.endTime)return l.activeWhen(e)})},getDisplayableSurveys:function(t){return e.grep(t,function(e){return l.isSurveyToBeDisplayed(e)})},getActiveSurvey:function(e,t){var r=l.getActiveSurveys(t),n=[e].concat(r),i=l.getDisplayableSurveys(n);return i.length<2?i[0]:i[Math.floor(Math.random()*i.length)]},displaySurvey:function(t){var r=e("#user-satisfaction-survey-container");if("email"===t.surveyType)l.displayEmailSurvey(t,r);else{if("url"!==t.surveyType&&t.surveyType!==undefined)return;l.displayURLSurvey(t,r)}l.incrementSurveySeenCounter(t),l.trackEvent(t.identifier,"banner_shown","Banner has been shown")},displayURLSurvey:function(e,t){var r=l.getUrlSurveyTemplate();t.append(r.render(e)),l.setURLSurveyEventHandlers(e)},displayEmailSurvey:function(e,t){var r=l.getEmailSurveyTemplate();t.append(r.render(e)),l.setEmailSurveyEventHandlers(e)},addParamsToURL:function(e){var t=e.replace(/\{\{currentPath\}\}/g,l.currentPath());return-1!==e.indexOf("?c=")?t+"&gcl="+GOVUK.analytics.gaClientId:t+"?gcl="+GOVUK.analytics.gaClientId},setEmailSurveyEventHandlers:function(t){var r=e("#email-survey-open"),n=e("#user-survey-cancel"),i=e("#email-survey-pre"),a=e("#email-survey-form"),s=e("#email-survey-post-success"),u=e("#email-survey-post-failure"),o=e("#survey-email-address");e("#take-survey").click(function(){l.setSurveyTakenCookie(t),l.hideSurvey(t),l.trackEvent(t.identifier,"no_email_link","User taken survey via no email link")}),r.click(function(e){return t.surveyExpanded=!0,l.trackEvent(t.identifier,"email_survey_open","Email survey opened"),i.addClass("js-hidden").attr("aria-hidden","true"),a.removeClass("js-hidden").attr("aria-hidden","false"),o.focus(),e.stopPropagation(),!1}),n.click(function(e){return l.setSurveyTakenCookie(t),l.hideSurvey(t),t.surveyExpanded?l.trackEvent(t.identifier,"email_survey_cancel","Email survey cancelled"):l.trackEvent(t.identifier,"banner_no_thanks","No thanks clicked"),e.stopPropagation(),!1}),a.submit(function(r){var n=function(){a.addClass("js-hidden").attr("aria-hidden","true"),s.removeClass("js-hidden").attr("aria-hidden","false"),s.focus(),l.setSurveyTakenCookie(t),l.trackEvent(t.identifier,"email_survey_taken","Email survey taken"),l.trackEvent(t.identifier,"banner_taken","User taken survey")},i=function(){a.addClass("js-hidden").attr("aria-hidden","true"),u.removeClass("js-hidden").attr("aria-hidden","false"),u.focus()},o=a.attr("action");return/\.js$/.test(o)||(o+=".js"),e.ajax({type:"POST",url:o,dataType:"json",data:a.serialize(),success:n,error:i,statusCode:{500:i}}),r.stopPropagation(),!1})},setURLSurveyEventHandlers:function(t){var r=e("#user-survey-cancel"),n=e("#take-survey");r.click(function(e){return l.setSurveyTakenCookie(t),l.hideSurvey(t),l.trackEvent(t.identifier,"banner_no_thanks","No thanks clicked"),e.stopPropagation(),!1}),n.click(function(){l.setSurveyTakenCookie(t),l.hideSurvey(t),l.trackEvent(t.identifier,"banner_taken","User taken survey")})},isSurveyToBeDisplayed:function(e){return"true"!==GOVUK.cookie(l.surveyTakenCookieName(e))&&(!l.surveyHasBeenSeenTooManyTimes(e)&&l.randomNumberMatches(e.frequency))},pathInBlacklist:function(){return new RegExp("^/(?:"+/service-manual/.source+")(?:/|$)").test(l.currentPath())},userCompletedTransaction:function(){function e(e,t){return e.indexOf(t)>-1}var t=l.currentPath();if(e(t,"/done")||e(t,"/transaction-finished")||e(t,"/driving-transaction-finished"))return!0},trackEvent:function(e,t,r){window.GOVUK.analytics.trackEvent(e,t,{label:r,value:1,nonInteraction:!0})},setSurveyTakenCookie:function(e){window.GOVUK.cookie(l.surveyTakenCookieName(e),!0,{days:90})},incrementSurveySeenCounter:function(e){var t=l.surveySeenCookieName(e),r=l.surveySeenCount(e)+1,n=l.seenTooManyTimesCooloff(e);n?window.GOVUK.cookie(t,r,{days:n}):window.GOVUK.cookie(t,r)},seenTooManyTimesCooloff:function(e){return e.seenTooManyTimesCooloff?p(e.seenTooManyTimesCooloff,undefined,1):undefined},hideSurvey:function(){e("#user-satisfaction-survey").removeClass("visible").attr("aria-hidden","true")},randomNumberMatches:function(e){return 0===Math.floor(Math.random()*e)},otherNotificationVisible:function(){return e([".govuk-emergency-banner:visible","#global-cookie-message:visible","#global-browser-prompt:visible","#taxonomy-survey:visible"].join(", ")).length>0},surveyHasBeenSeenTooManyTimes:function(e){return l.surveySeenCount(e)>=l.surveySeenTooManyTimesLimit(e)},surveySeenTooManyTimesLimit:function(e){var t=e.seenTooManyTimesLimit;return"unlimited"===String(t).toLowerCase()?Infinity:p(t,a,1)},surveySeenCount:function(e){return p(GOVUK.cookie(l.surveySeenCookieName(e)),0,0)},surveyTakenCookieName:function(e){return v("taken_"+e.identifier)},surveySeenCookieName:function(e){return v("survey_seen_"+e.identifier)},pathMatch:function(t){return t!==undefined&&new RegExp(e.map(e.makeArray(t),function(e){return/[\^\$]/.test(e)?"(?:"+e+")":"(?:/"+e+"(?:/|$))"}).join("|")).test(l.currentPath())},breadcrumbMatch:function(t){return t!==undefined&&new RegExp(e.makeArray(t).join("|"),"i").test(l.currentBreadcrumb())},sectionMatch:function(t){if(t===undefined)return!1;var r=new RegExp(e.makeArray(t).join("|"),"i");return r.test(l.currentSection())||r.test(l.currentThemes())},organisationMatch:function(t){return t!==undefined&&new RegExp(e.makeArray(t).join("|")).test(l.currentOrganisation())},activeWhen:function(e){if(e.hasOwnProperty("activeWhen")){if(e.activeWhen.hasOwnProperty("path")||e.activeWhen.hasOwnProperty("breadcrumb")||e.activeWhen.hasOwnProperty("section")||e.activeWhen.hasOwnProperty("organisation")){var t=e.activeWhen.matchType||"include",r=l.pathMatch(e.activeWhen.path),n=l.breadcrumbMatch(e.activeWhen.breadcrumb),i=l.sectionMatch(e.activeWhen.section),a=l.organisationMatch(e.activeWhen.organisation),s=r||n||i||a;return"exclude"!==t?s:!s}return!0}return!0},currentTime:function(){return(new Date).getTime()},currentPath:function(){return window.location.pathname},currentBreadcrumb:function(){return e(".govuk-breadcrumbs").text()||""},currentSection:function(){return e('meta[name="govuk:section"]').attr("content")||""},currentThemes:function(){return e('meta[name="govuk:themes"]').attr("content")||""},currentOrganisation:function(){return e('meta[name="govuk:analytics:organisations"]').attr("content")||""}},v=function(e){return"govuk_"+e.replace(/(\_\w)/g,function(e){return e.charAt(1).toUpperCase()})},p=function(e,t,r){var n=parseInt(e,10);return isNaN(n)||n<r?t:n};window.GOVUK.userSurveys=l,e(document).ready(function(){GOVUK.userSurveys&&(GOVUK.analytics&&GOVUK.analytics.gaClientId?window.GOVUK.userSurveys.init():e(window).on("gaClientSet",function(){window.GOVUK.userSurveys.init()}))})}(window.jQuery);